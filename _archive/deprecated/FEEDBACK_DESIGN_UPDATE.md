# 使用者回饋設計更新 - 從 2 選項改為 3 選項

## 📋 變更摘要

| 面向 | 原設計 | 新設計 | 備註 |
|------|--------|--------|------|
| **選項數量** | 2 個 | 3 個 | 提供更細緻的反饋 |
| **選項含義** | 👍 滿意 / 👎 不滿意 | ❌ 不適用 / △ 部分適用 / ✓ 適用 | 評價從「滿意度」改為「適用性」 |
| **UI 呈現** | 兩個按鈕 | 三個大卡片/按鈕（Emoji + 文字） | 更視覺化、易於點擊 |
| **點擊反饋** | 簡單高亮 | 點擊後清晰高亮選中 | 更直觀的交互 |

---

## 🎯 三個選項詳解

### ❌ **不適用** (not_applicable)
**含義**：該練習卡與我的症狀無關或不適合我的情況
**何時選擇**：
- 練習卡描述的症狀與我遇到的問題不符
- 練習卡的難度或方法不適合我的等級
- 我已經掌握了這個練習，無需再練習

### △ **部分適用** (partially_applicable)
**含義**：該練習卡有幫助，但需要調整或補充
**何時選擇**：
- 練習有幫助，但步驟需要簡化或詳細化
- 練習方向正確，但建議的次數/時長不太合適
- 希望有額外的背景知識或理論說明
- 練習有幫助，但配合其他練習才更有效果

### ✓ **適用** (applicable)
**含義**：該練習卡很有幫助，完全符合我的需求
**何時選擇**：
- 練習卡準確識別了我的症狀並提供了有效的解決方案
- 步驟清晰易懂，建議的強度和次數恰到好處
- 我實踐後明顯感受到改進

---

## 🔄 工作流程變化

### 使用者側

**練習卡詳細頁面 (UI-304)**：
```
┌─────────────────────────────────┐
│   練習卡內容展示                  │
│   ├─ 目標                        │
│   ├─ 要點                        │
│   ├─ 常見錯誤                    │
│   └─ 自我檢查                    │
├─────────────────────────────────┤
│  這個練習對你有幫助嗎？           │
│                                 │
│  [❌ 不適用] [△ 部分適用] [✓ 適用] │  ← 三個大按鈕
│                                 │
│  你有其他建議嗎？（可選）        │
│  [文字輸入框........................] │
│                                 │
│              [提交回饋]          │
└─────────────────────────────────┘
```

### 資料側

**Session 表 - feedback_rating 字段**：
```sql
-- 原設計
feedback_rating VARCHAR(10)  -- 值：'👍', '👎'

-- 新設計
feedback_rating VARCHAR(20)  -- 值：'not_applicable', 'partially_applicable', 'applicable'
```

**API 端點 - POST /api/v1/feedback**：
```json
// 請求
{
  "session_id": 123,
  "practice_card_id": 456,
  "feedback_rating": "partially_applicable",  // ← 3 選項之一
  "feedback_text": "這個練習很有用，但希望能有更詳細的步驟說明"
}

// 回應
{
  "success": true,
  "message": "感謝您的反饋！",
  "feedback_id": 789,
  "recorded_at": "2025-10-28T14:30:00Z"
}
```

---

## 📊 分析側的改進

### 可收集的更精準資訊

**原設計的限制**：
- 👍 滿意 vs 👎 不滿意（二分法，信息有限）
- 無法區分「練習無關」vs「練習不夠詳細」

**新設計的優勢**：
- ❌ 不適用：識別「練習卡與症狀不符」或「難度不對」的情況
- △ 部分適用：識別「練習有潛力但需改進」的情況
- ✓ 適用：識別「練習卡品質高」的情況

### 系統優化空間

```
收到反饋
  │
  ├─ 適用 (✓) → 保留此練習卡，供其他用戶使用
  │
  ├─ 部分適用 (△) → 標記「需要改進」
  │             ├─ 增加更詳細的步驟說明
  │             ├─ 提供 FAQ 或常見問題解答
  │             └─ 結合其他相關練習卡推薦
  │
  └─ 不適用 (❌) → 檢查是否需要改進症狀辨識邏輯
                ├─ 該症狀是否被誤辨識？
                ├─ 練習卡是否應該針對其他症狀？
                └─ 調整 SymptomPracticeMapping 的關聯性分數
```

---

## 🔧 實作清單

### 資料庫層
- [ ] 更新 `Session` 表的 `feedback_rating` 字段定義（VARCHAR 從 10 改為 20）
- [ ] 遷移現有資料（如有）：`'👍'` → `'applicable'`, `'👎'` → `'not_applicable'`

### API 層
- [ ] 更新 API-204.1 驗證邏輯，接受三個新的值域
- [ ] 更新 API 回應的 `feedback_rating` 欄位說明

### UI 層
- [ ] 更新 UI-307 回饋界面
  - 設計三個大卡片/按鈕
  - 顯示 Emoji + 文字標籤
  - 實現點擊選中的交互反饋
- [ ] 確保文字輸入框保留（用於補充詳細意見）

### 分析和報告
- [ ] 在管理後台添加回饋分析儀表板
  - 顯示「不適用」vs「部分適用」vs「適用」的比例
  - 針對「部分適用」的反饋進行分類和分析
  - 建議改進的練習卡（基於反饋）

---

## 📝 建議文案

### UI 上方說明文字
```
這個練習對你有幫助嗎？

❌ 不適用 - 練習與我的症狀無關或不適合我
△ 部分適用 - 有幫助，但需要調整或補充
✓ 適用 - 完全符合我的需求，非常有幫助
```

### 自由文字框標籤
```
有其他建議嗎？（可選）

例如：
- 希望有更詳細的步驟說明
- 建議的次數對我來說太多/太少
- 這個練習對我的另一個問題也很有幫助
```

---

## 🔄 向下相容性

**如果現有系統已有 👍/👎 的資料**：
```python
# 資料遷移邏輯
if old_feedback == '👍':
    new_feedback = 'applicable'      # 滿意 → 適用
elif old_feedback == '👎':
    new_feedback = 'not_applicable'  # 不滿意 → 不適用
```

---

## ✅ 驗收標準

- [ ] 資料庫層支援新的 3 選項值域
- [ ] API 端點正確驗證和儲存新值域
- [ ] UI 清晰顯示三個選項（Emoji + 文字）
- [ ] 用戶點擊選項後有視覺反饋（高亮）
- [ ] 自由文字反饋框保留並可選填
- [ ] 管理後台可查看並分析三個選項的統計數據
- [ ] 舊資料正確遷移（如適用）

---

**更新日期**：2025-10-28
**版本**：v1.0 (UI Feedback Improvement)
**優先級**：中（不影響核心功能，但提升用戶體驗和資料品質）
