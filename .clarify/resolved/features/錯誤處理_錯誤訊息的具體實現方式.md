# 釐清問題

「錯誤處理」中的「錯誤訊息」具體實現方式為何？

# 定位

Feature：錯誤處理，Rule "錯誤訊息" 中提到「錯誤訊息應清晰、具體，便於開發人員排查問題」

# 多選題

| 選項 | 描述 |
|--------|-------------|
| A | 使用標準錯誤訊息格式（如 RFC 7807） |
| B | 使用自定義錯誤訊息格式 |
| C | 使用 HTTP 狀態碼和錯誤代碼組合 |
| D | 使用 JSON 格式的錯誤響應 |
| Short | 提供其他簡短答案（<=5 字） |

# 影響範圍

影響錯誤處理能力，問題診斷效率，以及使用者體驗

# 優先級

Medium
- Medium：影響邊界條件或測試完整性

---

# 解決記錄

- **回答**：D - 使用 JSON 格式的錯誤響應
- **更新的規格檔**：spec/features/錯誤處理.feature
- **變更內容**：在錯誤處理功能中確認錯誤訊息具體實現方式為使用 JSON 格式的錯誤響應：
  1. 技術一致性：系統已選擇 FastAPI 作為後端框架，FastAPI 原生支援 JSON 格式的錯誤響應，與前端 React 應用程序良好整合
  2. 實現方式：使用 JSON 格式的錯誤響應，包含錯誤代碼、訊息和詳細資訊；錯誤訊息應清晰、具體，便於開發人員排查問題；提供標準的錯誤格式便於前端處理
  3. 錯誤格式：
     ```json
     {
       "error_code": "SYMPTOM_NOT_FOUND",
       "message": "無法辨識症狀",
       "detail": "系統無法從輸入 '轉彎會後坐' 辨識出明確症狀",
       "timestamp": "2025-10-27T12:00:00Z"
     }
     ```
  4. 錯誤分類：
     - 業務邏輯錯誤：如症狀無法辨識、練習卡不符合條件等
     - 系統錯誤：如資料庫連接失敗、AI 模型不可用等
     - 輸入驗證錯誤：如缺少必要參數、參數格式錯誤等
  5. 使用者體驗：錯誤訊息對使用者友好，避免技術術語；提供具體的解決建議；保持錯誤處理的一致性